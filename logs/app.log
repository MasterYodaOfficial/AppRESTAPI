2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.001993s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.008227s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.009306s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'pk_1': 1}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.03376s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.03478s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.03834s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.03905s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.02437s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.02222s ago] {'pk_1': 1}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 17, 55, 27, 503934), 'duration_minutes': 60}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.0609s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.06176s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.06569s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.06656s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.05094s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.04867s ago] {'pk_1': 1}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.02577s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 17, 55, 27, 529037), 'duration_minutes': 60}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.05225s ago] {'pk_1': 1}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.02953s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 25, 27, 529037), 'duration_minutes': 60}
2025-04-09 17:55:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 17:55:27 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 17:55:27 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 17:55:27 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 17:55:28 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 17:55:28 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 17:55:28 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 17:55:28 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 17:55:28 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 17:55:28 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 17:55:28 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 17:55:28 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 17:55:28 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 500 Internal Server Error"
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.001711s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.01055s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.01151s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'pk_1': 1}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.03548s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.03632s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.03996s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.04068s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.02412s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.02119s ago] {'pk_1': 1}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 17, 58, 14, 315057), 'duration_minutes': 60}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.06114s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.06195s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.06591s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.06677s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.04983s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.04681s ago] {'pk_1': 1}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.02501s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 17, 58, 14, 339301), 'duration_minutes': 60}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.0504s ago] {'pk_1': 1}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - [cached since 0.02869s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 28, 14, 339301), 'duration_minutes': 60}
2025-04-09 17:58:14 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 17:58:14 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 17:58:14 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 17:58:14 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'New Table', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 17:58:14 - app.routers.tables - INFO - Столик создан: ID None - New Table
2025-04-09 17:58:15 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 17:58:15 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 17:58:15 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 17:58:15 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 17:58:15 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 17:58:15 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 17:58:15 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 17:58:15 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 17:58:15 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 17:58:15 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 500 Internal Server Error"
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.002081s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.01208s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.01334s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.03877s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.03988s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.04373s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.04462s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00026s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.02489s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.02232s ago] {'pk_1': 1}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 4, 8, 140199), 'duration_minutes': 60}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'pk_1': 1}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.06625s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.06721s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.07121s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.07201s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.05199s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.04943s ago] {'pk_1': 1}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.0265s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 4, 8, 165786), 'duration_minutes': 60}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.0531s ago] {'pk_1': 1}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - [cached since 0.03033s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 34, 8, 165786), 'duration_minutes': 60}
2025-04-09 18:04:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:04:08 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 18:04:08 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 18:04:08 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 18:04:08 - app.routers.tables - INFO - Столик создан: ID None - vip4
2025-04-09 18:04:08 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 18:04:08 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 18:04:08 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 18:04:08 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 18:04:08 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 18:04:08 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 18:04:08 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 18:04:08 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 18:04:08 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 18:04:08 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 500 Internal Server Error"
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.002268s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.01176s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.01276s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'pk_1': 1}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.03811s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.03933s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.0436s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.04476s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.02586s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.02343s ago] {'pk_1': 1}
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:45:31 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 45, 31, 997657), 'duration_minutes': 60}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.06781s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.06878s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.0731s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.07402s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [no key 0.00026s] {}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.0547s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.05236s ago] {'pk_1': 1}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.02798s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 45, 32, 25031), 'duration_minutes': 60}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.05578s ago] {'pk_1': 1}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.03149s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 15, 32, 25031), 'duration_minutes': 60}
2025-04-09 18:45:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:45:32 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 18:45:32 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 18:45:32 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 18:45:32 - app.routers.tables - INFO - Столик создан: ID None - vip4
2025-04-09 18:45:32 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.002391s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.01209s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.01344s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'pk_1': 1}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04026s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.0413s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04557s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04644s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02662s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.0235s ago] {'pk_1': 1}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 52, 23, 815309), 'duration_minutes': 60}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'pk_1': 1}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06859s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06945s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.07344s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.07418s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00034s] {}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.05437s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.05085s ago] {'pk_1': 1}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02648s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 52, 23, 841038), 'duration_minutes': 60}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.05439s ago] {'pk_1': 1}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.03006s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 22, 23, 841038), 'duration_minutes': 60}
2025-04-09 18:52:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:52:23 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 18:52:23 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 18:52:24 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 18:52:24 - app.routers.tables - INFO - Столик создан: ID None - vip4
2025-04-09 18:52:24 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.001781s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.006602s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.007407s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.03108s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.03199s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.03586s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.03677s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.0241s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.02205s ago] {'pk_1': 1}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 53, 35, 866930), 'duration_minutes': 60}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.05864s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.0596s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.06363s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.06451s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.0515s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.04938s ago] {'pk_1': 1}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.02702s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 53, 35, 892726), 'duration_minutes': 60}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.05342s ago] {'pk_1': 1}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.0308s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 23, 35, 892726), 'duration_minutes': 60}
2025-04-09 18:53:35 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:53:35 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 18:53:35 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 18:53:35 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 18:53:36 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 18:53:36 - app.routers.tables - INFO - Столик создан: ID None - vip4
2025-04-09 18:53:36 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.002163s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.01135s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.01241s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'pk_1': 1}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.03706s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.0381s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04237s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04323s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02416s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02154s ago] {'pk_1': 1}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 57, 23, 356980), 'duration_minutes': 60}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06295s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06376s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.0675s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.0684s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.0491s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04643s ago] {'pk_1': 1}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02426s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 18, 57, 23, 380540), 'duration_minutes': 60}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04999s ago] {'pk_1': 1}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02806s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 27, 23, 380540), 'duration_minutes': 60}
2025-04-09 18:57:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 18:57:23 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 18:57:23 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 18:57:23 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 18:57:23 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 18:57:23 - app.routers.tables - INFO - Столик создан: ID None - vip4
2025-04-09 18:57:24 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.002589s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.01225s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.01389s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.04542s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.04662s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.05105s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.05193s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.02643s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.02362s ago] {'pk_1': 1}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 0, 40, 393814), 'duration_minutes': 60}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.07352s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.07433s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.07885s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.08015s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.05477s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.05146s ago] {'pk_1': 1}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.02697s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 0, 40, 420136), 'duration_minutes': 60}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.05502s ago] {'pk_1': 1}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 0.03072s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 30, 40, 420136), 'duration_minutes': 60}
2025-04-09 19:00:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:00:40 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:00:40 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:00:40 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:00:40 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:00:40 - app.routers.tables - INFO - Столик создан: ID None - vip4
2025-04-09 19:00:41 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.002107s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.01097s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.01192s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.03683s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.03793s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.04239s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.04321s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.02527s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.02315s ago] {'pk_1': 1}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 0, 57, 443172), 'duration_minutes': 60}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.0649s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.06576s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.06987s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.07064s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.05398s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.05191s ago] {'pk_1': 1}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.02808s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 0, 57, 470514), 'duration_minutes': 60}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.05538s ago] {'pk_1': 1}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.03159s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 30, 57, 470514), 'duration_minutes': 60}
2025-04-09 19:00:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:00:57 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:00:57 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:00:57 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:00:57 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:00:57 - app.routers.tables - INFO - Столик создан: ID None - vip4
2025-04-09 19:00:58 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.002036s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.006917s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.007784s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'pk_1': 1}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.03155s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.03261s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00031s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.03706s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.03791s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.02462s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.02273s ago] {'pk_1': 1}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 1, 50, 619603), 'duration_minutes': 60}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.05902s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.06003s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.06438s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.06539s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.05348s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.05178s ago] {'pk_1': 1}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.02856s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 1, 50, 647210), 'duration_minutes': 60}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.05578s ago] {'pk_1': 1}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - [cached since 0.03264s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 31, 50, 647210), 'duration_minutes': 60}
2025-04-09 19:01:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:01:50 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:01:50 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:01:50 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:01:51 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:01:51 - app.routers.tables - INFO - Столик создан: ID None - vip4
2025-04-09 19:01:51 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.002212s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.01129s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.01223s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'pk_1': 1}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.03782s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.03881s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.04282s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.04359s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.02588s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.02348s ago] {'pk_1': 1}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 3, 43, 388038), 'duration_minutes': 60}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.06632s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.06721s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.07097s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.07174s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.05339s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.05114s ago] {'pk_1': 1}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.027s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 3, 43, 414278), 'duration_minutes': 60}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.05493s ago] {'pk_1': 1}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.03083s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 33, 43, 414278), 'duration_minutes': 60}
2025-04-09 19:03:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:03:43 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:03:43 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:03:43 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:03:43 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:03:43 - app.routers.tables - INFO - Столик создан: ID None - vip4
2025-04-09 19:03:44 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.002103s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.0108s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.01157s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.03605s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.0372s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.04166s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.04249s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.02516s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.02249s ago] {'pk_1': 1}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 5, 39, 512687), 'duration_minutes': 60}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.06298s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.06381s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.06742s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.06815s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.05069s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.04812s ago] {'pk_1': 1}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.02518s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 5, 39, 536991), 'duration_minutes': 60}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.05171s ago] {'pk_1': 1}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.02886s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 35, 39, 536991), 'duration_minutes': 60}
2025-04-09 19:05:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.001904s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.007249s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.008165s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.03123s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.03218s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.03604s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.03685s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.02334s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.02156s ago] {'pk_1': 1}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 7, 1, 107583), 'duration_minutes': 60}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.05791s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.05878s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.06257s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.06332s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] {}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.05003s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.04786s ago] {'pk_1': 1}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.02546s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 7, 1, 132355), 'duration_minutes': 60}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.05146s ago] {'pk_1': 1}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.02912s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 37, 1, 132355), 'duration_minutes': 60}
2025-04-09 19:07:01 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.002019s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.0118s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.01328s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00028s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00034s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.04632s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.04769s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00034s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.05285s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.05378s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.02732s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.02454s ago] {'pk_1': 1}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 8, 49, 579583), 'duration_minutes': 60}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.07593s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.07718s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.08196s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.08286s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.05683s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.05365s ago] {'pk_1': 1}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.0285s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 8, 49, 607286), 'duration_minutes': 60}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.05723s ago] {'pk_1': 1}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.03221s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 38, 49, 607286), 'duration_minutes': 60}
2025-04-09 19:08:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:08:49 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:08:49 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:08:49 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:08:50 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:08:50 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 19:08:50 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 19:08:50 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.002192s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.007229s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.008089s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.03125s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.03232s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.0361s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.03685s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.02381s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.02199s ago] {'pk_1': 1}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 9, 41, 587723), 'duration_minutes': 60}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.05842s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.05931s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.06311s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.06389s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00028s] {}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.05209s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.04967s ago] {'pk_1': 1}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.02687s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 9, 41, 613858), 'duration_minutes': 60}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.05314s ago] {'pk_1': 1}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.03029s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 39, 41, 613858), 'duration_minutes': 60}
2025-04-09 19:09:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:09:41 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:09:41 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:09:41 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:09:42 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:09:42 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 19:09:42 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 19:09:42 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.001867s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.01057s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.01147s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'pk_1': 1}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.03532s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.03636s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04008s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.0408s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00026s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02404s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02194s ago] {'pk_1': 1}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 26, 23, 364781), 'duration_minutes': 60}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'pk_1': 1}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.063s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06419s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06848s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06938s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.05247s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.05041s ago] {'pk_1': 1}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.0277s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 26, 23, 391843), 'duration_minutes': 60}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.05405s ago] {'pk_1': 1}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.03149s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 56, 23, 391843), 'duration_minutes': 60}
2025-04-09 19:26:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:26:23 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:26:23 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:26:23 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:26:23 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 19:26:23 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:26:23 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 19:26:23 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 19:26:23 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.001772s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.006779s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.007705s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'pk_1': 1}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.03109s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.03205s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.03597s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.03692s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.02386s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.02151s ago] {'pk_1': 1}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 41, 41, 64284), 'duration_minutes': 60}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.05936s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.06048s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.0645s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.06537s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [no key 0.00037s] {}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.0528s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.05055s ago] {'pk_1': 1}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.02726s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 41, 41, 91696), 'duration_minutes': 60}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.05429s ago] {'pk_1': 1}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.03106s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 11, 41, 91696), 'duration_minutes': 60}
2025-04-09 19:41:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:41:41 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:41:41 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:41:41 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:41:41 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 19:41:41 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:41:41 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 19:41:41 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 19:41:41 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.002521s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.01185s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.01294s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.03782s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.03889s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.0426s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.04333s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.02421s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.02168s ago] {'pk_1': 1}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 45, 53, 814867), 'duration_minutes': 60}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.06466s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.06564s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.06992s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.07082s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.05227s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.05152s ago] {'pk_1': 1}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.02947s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 45, 53, 843308), 'duration_minutes': 60}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.05581s ago] {'pk_1': 1}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.03366s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 15, 53, 843308), 'duration_minutes': 60}
2025-04-09 19:45:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:45:53 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:45:53 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:45:53 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:45:53 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 19:45:53 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:45:53 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 19:45:53 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 19:45:53 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:45:53 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.002273s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.01175s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.01278s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00029s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.03738s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.03867s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.043s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04398s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02518s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02301s ago] {'pk_1': 1}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 47, 23, 216057), 'duration_minutes': 60}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06486s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06579s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06981s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.07056s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.0519s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04971s ago] {'pk_1': 1}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02613s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 47, 23, 241170), 'duration_minutes': 60}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.05358s ago] {'pk_1': 1}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.03s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 17, 23, 241170), 'duration_minutes': 60}
2025-04-09 19:47:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:47:23 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:47:23 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:47:23 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:47:23 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 19:47:23 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:47:23 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 19:47:23 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 19:47:23 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:47:23 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.002382s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.01177s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.0128s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.03766s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.03901s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.0433s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.04413s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.02482s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.0224s ago] {'pk_1': 1}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 48, 16, 976446), 'duration_minutes': 60}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.06497s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.06588s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.06994s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.07082s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 19:48:16 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - [cached since 0.05252s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - [cached since 0.05008s ago] {'pk_1': 1}
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - [cached since 0.02695s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 48, 17, 2729), 'duration_minutes': 60}
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - [cached since 0.0536s ago] {'pk_1': 1}
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - [cached since 0.0305s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 18, 17, 2729), 'duration_minutes': 60}
2025-04-09 19:48:17 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:48:17 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:48:17 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:48:17 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:48:17 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 19:48:17 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:48:17 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 19:48:17 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 19:48:17 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:48:17 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.001913s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.006817s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.007625s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.03218s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.03349s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.03774s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.03863s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.02503s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.02235s ago] {'pk_1': 1}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 49, 49, 758203), 'duration_minutes': 60}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.0591s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.06s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.06427s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.06509s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.05128s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.04867s ago] {'pk_1': 1}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.02578s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 49, 49, 783110), 'duration_minutes': 60}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.05247s ago] {'pk_1': 1}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.02966s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 19, 49, 783110), 'duration_minutes': 60}
2025-04-09 19:49:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:49:49 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:49:49 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:49:49 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:49:49 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 19:49:49 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:49:49 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 19:49:49 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 19:49:49 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:49:49 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:49:49 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 19:49:49 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 19:49:49 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 19:49:49 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 19:49:49 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 19:49:49 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 19:49:49 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 19:49:49 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 19:49:49 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.002383s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.01184s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.01306s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.03779s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.03911s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.04371s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.04453s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.02487s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.02234s ago] {'pk_1': 1}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 50, 10, 425531), 'duration_minutes': 60}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.06444s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.06526s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.0693s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.0702s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.05132s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.04919s ago] {'pk_1': 1}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.02631s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 50, 10, 451062), 'duration_minutes': 60}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.05275s ago] {'pk_1': 1}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.02985s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 20, 10, 451062), 'duration_minutes': 60}
2025-04-09 19:50:10 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:50:10 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:50:10 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:50:10 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:50:10 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 19:50:10 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:50:10 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 19:50:10 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 19:50:10 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:50:10 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:50:10 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 19:50:10 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 19:50:10 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 19:50:10 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 19:50:10 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 19:50:10 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 19:50:10 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 19:50:10 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 19:50:10 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.001694s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.006476s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.00747s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.03154s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.03263s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.03663s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.03766s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.02424s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.02201s ago] {'pk_1': 1}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 50, 54, 581817), 'duration_minutes': 60}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'pk_1': 1}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.05904s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.06001s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.06408s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.06486s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.05275s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.05118s ago] {'pk_1': 1}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.02869s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 19, 50, 54, 609709), 'duration_minutes': 60}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.05514s ago] {'pk_1': 1}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - [cached since 0.03276s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 20, 54, 609709), 'duration_minutes': 60}
2025-04-09 19:50:54 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 19:50:54 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:50:54 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 19:50:54 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 19:50:54 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 19:50:54 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 19:50:54 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 19:50:54 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 19:50:54 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 19:50:54 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 19:50:54 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 19:50:54 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 19:50:54 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 19:50:54 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 19:50:54 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 19:50:54 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 19:50:54 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 19:50:54 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 19:50:54 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.002228s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.007462s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.008377s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.03258s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.03358s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.03779s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.03869s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.02498s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.02271s ago] {'pk_1': 1}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 5, 9, 526858), 'duration_minutes': 60}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.06075s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.062s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.0666s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.06779s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.05397s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.052s ago] {'pk_1': 1}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.02869s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 5, 9, 554503), 'duration_minutes': 60}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.05594s ago] {'pk_1': 1}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - [cached since 0.03265s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 35, 9, 554503), 'duration_minutes': 60}
2025-04-09 20:05:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:05:09 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:05:09 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:05:09 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:05:09 - httpx - INFO - HTTP Request: POST http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:05:09 - httpx - INFO - HTTP Request: POST http://testserver/reservations/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:05:09 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 20:05:09 - app.routers.reservations - INFO - Бронирование 1 успешно удалено
2025-04-09 20:05:09 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 200 OK"
2025-04-09 20:05:09 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 999
2025-04-09 20:05:09 - app.routers.reservations - WARNING - Бронирование 999 не найдено
2025-04-09 20:05:09 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:05:10 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 20:05:10 - app.routers.reservations - ERROR - Ошибка при удалении бронирования 1: Delete error
2025-04-09 20:05:10 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 500 Internal Server Error"
2025-04-09 20:05:10 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:05:10 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:05:10 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:05:10 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:05:10 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:05:10 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:05:10 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:05:10 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:05:10 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:05:10 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:05:10 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:05:10 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:05:10 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:05:10 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:05:10 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:05:10 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:05:10 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:05:10 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.002004s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.01074s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.01169s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'pk_1': 1}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.03522s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.03629s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.04023s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.04101s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.02385s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.02153s ago] {'pk_1': 1}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 7, 22, 710235), 'duration_minutes': 60}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.06117s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.06203s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.06625s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.06725s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.05047s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.04879s ago] {'pk_1': 1}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.02682s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 7, 22, 735981), 'duration_minutes': 60}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.05276s ago] {'pk_1': 1}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - [cached since 0.03079s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 37, 22, 735981), 'duration_minutes': 60}
2025-04-09 20:07:22 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:07:22 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:07:22 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:07:22 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:07:23 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:07:23 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:07:23 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:07:23 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:07:23 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:07:23 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:07:23 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:07:23 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:07:23 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:07:23 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:07:23 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:07:23 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:07:23 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:07:23 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:07:23 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:07:23 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:07:23 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:07:23 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.001992s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.006864s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.007834s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.03163s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.03274s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.03688s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.03777s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.02522s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.0234s ago] {'pk_1': 1}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 9, 47, 635991), 'duration_minutes': 60}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.06023s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.06107s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.06512s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.06591s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00029s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.05301s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.05052s ago] {'pk_1': 1}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.02634s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 9, 47, 661705), 'duration_minutes': 60}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.05387s ago] {'pk_1': 1}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.02995s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 39, 47, 661705), 'duration_minutes': 60}
2025-04-09 20:09:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:09:47 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:09:47 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:09:47 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:09:48 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:09:48 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:09:48 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:09:48 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:09:48 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:09:48 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:09:48 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:09:48 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:09:48 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:09:48 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:09:48 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:09:48 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:09:48 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:09:48 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:09:48 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:09:48 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:09:48 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:09:48 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.001863s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.007148s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.008062s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'pk_1': 1}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.03118s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.03233s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.03662s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.03745s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.02505s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.02265s ago] {'pk_1': 1}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 11, 20, 824451), 'duration_minutes': 60}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.05904s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.06003s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.06419s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.06507s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.05257s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.05041s ago] {'pk_1': 1}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.02716s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 11, 20, 850822), 'duration_minutes': 60}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.05396s ago] {'pk_1': 1}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - [cached since 0.03072s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 41, 20, 850822), 'duration_minutes': 60}
2025-04-09 20:11:20 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:11:20 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:11:20 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:11:20 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:11:21 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:11:21 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:11:21 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:11:21 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:11:21 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:11:21 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:11:21 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:11:21 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:11:21 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:11:21 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:11:21 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:11:21 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:11:21 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:11:21 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:11:21 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:11:21 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:11:21 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:11:21 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.00223s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.00765s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.008878s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.03409s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.03543s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.04044s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.04144s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.0285s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.02563s ago] {'pk_1': 1}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 11, 48, 427130), 'duration_minutes': 60}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.06447s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.06545s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.06948s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.07042s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.05524s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.05244s ago] {'pk_1': 1}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.0262s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 11, 48, 452505), 'duration_minutes': 60}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.05605s ago] {'pk_1': 1}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.02984s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 41, 48, 452505), 'duration_minutes': 60}
2025-04-09 20:11:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:11:48 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:11:48 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:11:48 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:11:48 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:11:48 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:11:48 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:11:48 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:11:48 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:11:48 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:11:48 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:11:48 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:11:48 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:11:48 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:11:48 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:11:48 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:11:48 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:11:48 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:11:48 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:11:48 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:11:48 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:11:48 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.002157s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.01116s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.01224s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.03778s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.03908s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.04346s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.04446s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.02581s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.02321s ago] {'pk_1': 1}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 15, 21, 519046), 'duration_minutes': 60}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.06576s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.06659s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.07022s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.07094s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.05205s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.04963s ago] {'pk_1': 1}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.02577s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 15, 21, 543941), 'duration_minutes': 60}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.05338s ago] {'pk_1': 1}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.02966s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 45, 21, 543941), 'duration_minutes': 60}
2025-04-09 20:15:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:15:21 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:15:21 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:15:21 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:15:21 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:15:21 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:15:21 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:15:21 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:15:21 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:15:21 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:15:21 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:15:21 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:15:21 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:15:21 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:15:21 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:15:21 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:15:21 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:15:21 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:15:21 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:15:21 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:15:21 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:15:21 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:15:21 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.00224s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.01127s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.01213s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'pk_1': 1}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.03562s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.03668s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.04154s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.04257s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.02497s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.02245s ago] {'pk_1': 1}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 16, 21, 532996), 'duration_minutes': 60}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.0631s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.06402s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.06818s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.06908s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.0519s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.04958s ago] {'pk_1': 1}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.02639s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 16, 21, 558620), 'duration_minutes': 60}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.05331s ago] {'pk_1': 1}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.03028s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 46, 21, 558620), 'duration_minutes': 60}
2025-04-09 20:16:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:16:21 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:16:21 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:16:21 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:16:21 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:16:21 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:16:21 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:16:21 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:16:21 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:16:21 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:16:21 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:16:21 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:16:21 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:16:21 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:16:21 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:16:21 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:16:21 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:16:21 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:16:21 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:16:21 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:16:21 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:16:21 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:16:21 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.002216s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.008065s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.009162s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'pk_1': 1}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.03424s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.03551s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.03937s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04022s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.0252s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02227s ago] {'pk_1': 1}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 32, 23, 812734), 'duration_minutes': 60}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06059s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06147s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00028s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06655s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.06753s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.05197s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.04907s ago] {'pk_1': 1}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02613s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 32, 23, 838068), 'duration_minutes': 60}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.05254s ago] {'pk_1': 1}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - [cached since 0.02976s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 2, 23, 838068), 'duration_minutes': 60}
2025-04-09 20:32:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:32:23 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:32:23 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:32:23 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:32:23 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:32:24 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:32:24 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:32:24 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:32:24 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:32:24 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:32:24 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:32:24 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:32:24 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:32:24 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:32:24 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:32:24 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:32:24 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:32:24 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:32:24 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:32:24 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:32:24 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:32:24 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:32:24 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.001859s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.01076s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.01174s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'pk_1': 1}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.03575s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.0368s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.04114s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.04211s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00028s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.02555s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.02398s ago] {'pk_1': 1}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 35, 53, 927272), 'duration_minutes': 60}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.06551s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.06653s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.07058s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.0714s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.05545s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.05319s ago] {'pk_1': 1}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.02832s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 35, 53, 954734), 'duration_minutes': 60}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.0568s ago] {'pk_1': 1}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.03202s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 5, 53, 954734), 'duration_minutes': 60}
2025-04-09 20:35:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:35:53 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:35:53 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:35:53 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:35:53 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:35:54 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:35:54 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:35:54 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:35:54 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:35:54 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:35:54 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:35:54 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:35:54 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:35:54 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:35:54 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:35:54 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:35:54 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:35:54 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:35:54 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:35:54 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:35:54 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:35:54 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:35:54 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.001931s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.007246s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.008147s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.0333s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.03438s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.03848s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.03925s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.0242s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.02207s ago] {'pk_1': 1}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 41, 7, 874209), 'duration_minutes': 60}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.06027s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.06125s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.06591s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.06703s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [no key 0.00026s] {}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.0533s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.05124s ago] {'pk_1': 1}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.02858s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 41, 7, 901814), 'duration_minutes': 60}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.05501s ago] {'pk_1': 1}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - [cached since 0.03221s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 11, 7, 901814), 'duration_minutes': 60}
2025-04-09 20:41:07 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:41:07 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:41:07 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:41:07 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:41:07 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:41:08 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:41:08 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:41:08 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:41:08 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:41:08 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:41:08 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:41:08 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:41:08 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:41:08 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:41:08 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:41:08 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:41:08 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:41:08 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:41:08 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:41:08 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:41:08 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:41:08 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:41:08 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.002422s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.007719s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.008595s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'pk_1': 1}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.03201s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.03303s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.03752s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.03836s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.02473s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.02228s ago] {'pk_1': 1}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 47, 25, 630573), 'duration_minutes': 60}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.05905s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.06s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.06478s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.06558s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.05273s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.05065s ago] {'pk_1': 1}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.02771s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 47, 25, 657342), 'duration_minutes': 60}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.0548s ago] {'pk_1': 1}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.03186s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 17, 25, 657342), 'duration_minutes': 60}
2025-04-09 20:47:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:47:25 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:47:25 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:47:25 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:47:25 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:47:25 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:47:25 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:47:25 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:47:25 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:47:25 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:47:25 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:47:25 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:47:25 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:47:25 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:47:25 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:47:25 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:47:25 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:47:25 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:47:25 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:47:25 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:47:25 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:47:25 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:47:25 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.002137s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.01189s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.01308s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.03819s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.03945s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.04359s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.04455s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.02616s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.0236s ago] {'pk_1': 1}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 50, 31, 977613), 'duration_minutes': 60}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.06717s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.06819s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.07259s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.07352s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:50:31 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.05475s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.05218s ago] {'pk_1': 1}
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.02808s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 50, 32, 4248), 'duration_minutes': 60}
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.05617s ago] {'pk_1': 1}
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.03179s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 20, 32, 4248), 'duration_minutes': 60}
2025-04-09 20:50:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:50:32 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:50:32 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:50:32 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:50:32 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:50:32 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:50:32 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:50:32 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:50:32 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:50:32 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:50:32 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:50:32 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:50:32 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:50:32 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:50:32 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:50:32 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:50:32 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:50:32 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:50:32 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:50:32 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:50:32 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:50:32 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:50:32 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.001976s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.01143s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.01254s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'pk_1': 1}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.03659s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.0376s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.04145s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.04234s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.0236s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.02132s ago] {'pk_1': 1}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 55, 12, 662393), 'duration_minutes': 60}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.06247s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.06332s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.06701s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.06773s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.04928s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.04687s ago] {'pk_1': 1}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.0248s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 55, 12, 686510), 'duration_minutes': 60}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.05065s ago] {'pk_1': 1}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - [cached since 0.02878s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 25, 12, 686510), 'duration_minutes': 60}
2025-04-09 20:55:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:55:12 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:55:12 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:55:12 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:55:12 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:55:12 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:55:12 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:55:12 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:55:12 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:55:12 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:55:12 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:55:12 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:55:12 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:55:12 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:55:12 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:55:12 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:55:12 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:55:12 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:55:12 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:55:12 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:55:12 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:55:12 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:55:12 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.002288s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.01119s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.01214s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'pk_1': 1}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.03531s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.03628s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.04061s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.04153s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.02432s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.02221s ago] {'pk_1': 1}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 56, 19, 636101), 'duration_minutes': 60}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'pk_1': 1}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.06279s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.06365s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.06746s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.06832s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.05104s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.04893s ago] {'pk_1': 1}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.02593s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 56, 19, 661183), 'duration_minutes': 60}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.05261s ago] {'pk_1': 1}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - [cached since 0.02961s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 26, 19, 661183), 'duration_minutes': 60}
2025-04-09 20:56:19 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:19 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:56:19 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: POST http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: POST http://testserver/reservations/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:19 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:56:19 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:56:19 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:56:19 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:56:19 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:56:19 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:56:19 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:56:19 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:56:19 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:56:19 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:56:19 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.002273s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.007807s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.008843s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'pk_1': 1}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.03308s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.0342s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.03811s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.03886s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.02483s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.02227s ago] {'pk_1': 1}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 56, 35, 171440), 'duration_minutes': 60}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.05981s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.06103s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.06501s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.06581s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.05145s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.04883s ago] {'pk_1': 1}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.02578s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 56, 35, 196517), 'duration_minutes': 60}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.0523s ago] {'pk_1': 1}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - [cached since 0.02935s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 26, 35, 196517), 'duration_minutes': 60}
2025-04-09 20:56:35 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:35 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:56:35 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: POST http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: POST http://testserver/reservations/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:35 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:56:35 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:56:35 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:56:35 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:56:35 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:56:35 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:56:35 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:56:35 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:56:35 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:56:35 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:56:35 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.001936s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.01083s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.01187s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.03606s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.03696s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.04058s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.04132s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.02337s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.02104s ago] {'pk_1': 1}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 56, 48, 594102), 'duration_minutes': 60}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.06199s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.06295s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.06714s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.06798s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] {}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.05022s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.04784s ago] {'pk_1': 1}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.02607s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 56, 48, 619391), 'duration_minutes': 60}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.05138s ago] {'pk_1': 1}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.02959s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 26, 48, 619391), 'duration_minutes': 60}
2025-04-09 20:56:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:48 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:56:48 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: POST http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: POST http://testserver/reservations/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:48 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:56:48 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:56:48 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:56:48 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:56:48 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:56:48 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:56:48 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:56:48 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:56:48 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:56:48 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:56:48 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.00163s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.01039s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.01139s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.0353s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.03632s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.04035s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.04116s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.02492s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.02326s ago] {'pk_1': 1}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 57, 1, 639930), 'duration_minutes': 60}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.06423s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.06534s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.06981s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.07083s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.05404s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.05193s ago] {'pk_1': 1}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.02767s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 57, 1, 667001), 'duration_minutes': 60}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.05537s ago] {'pk_1': 1}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.03124s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 27, 1, 667001), 'duration_minutes': 60}
2025-04-09 20:57:01 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:01 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:57:01 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: POST http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: POST http://testserver/reservations/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:57:01 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 20:57:01 - app.routers.reservations - INFO - Бронирование 1 успешно удалено
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 200 OK"
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:01 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:57:01 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:57:01 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:57:01 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:57:01 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:57:01 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:57:01 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:57:01 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:57:01 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:57:01 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:57:01 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.002018s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.01083s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.01167s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.03555s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.0366s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.04046s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.0412s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.02348s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.02102s ago] {'pk_1': 1}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 57, 15, 86561), 'duration_minutes': 60}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.06154s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.06252s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.06651s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.06741s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.05036s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.04802s ago] {'pk_1': 1}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.02616s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 57, 15, 112042), 'duration_minutes': 60}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.05142s ago] {'pk_1': 1}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - [cached since 0.02965s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 27, 15, 112042), 'duration_minutes': 60}
2025-04-09 20:57:15 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:15 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:57:15 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: POST http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: POST http://testserver/reservations/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:57:15 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 20:57:15 - app.routers.reservations - INFO - Бронирование 1 успешно удалено
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 200 OK"
2025-04-09 20:57:15 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 999
2025-04-09 20:57:15 - app.routers.reservations - WARNING - Бронирование 999 не найдено
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:15 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:57:15 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:57:15 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:57:15 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:57:15 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:57:15 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:57:15 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:57:15 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:57:15 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:57:15 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:57:15 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.001964s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.01073s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.01166s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'pk_1': 1}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.03442s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.03525s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.03889s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.0396s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.0227s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.02068s ago] {'pk_1': 1}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 57, 34, 132658), 'duration_minutes': 60}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.06072s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.06173s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.06594s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.06683s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.04982s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.04776s ago] {'pk_1': 1}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.02631s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 57, 34, 158202), 'duration_minutes': 60}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.05125s ago] {'pk_1': 1}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.02995s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 27, 34, 158202), 'duration_minutes': 60}
2025-04-09 20:57:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:34 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:57:34 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: POST http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: POST http://testserver/reservations/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:57:34 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 20:57:34 - app.routers.reservations - INFO - Бронирование 1 успешно удалено
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 200 OK"
2025-04-09 20:57:34 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 999
2025-04-09 20:57:34 - app.routers.reservations - WARNING - Бронирование 999 не найдено
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:34 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:57:34 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:57:34 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:57:34 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:57:34 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:57:34 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:57:34 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:57:34 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:57:34 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:57:34 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:57:34 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.002263s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.008072s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.009253s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00030s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.03926s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.0405s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.04449s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.04527s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.02619s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.02348s ago] {'pk_1': 1}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 57, 47, 497044), 'duration_minutes': 60}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.06729s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.06832s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.07303s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.07389s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.05457s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.05189s ago] {'pk_1': 1}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.02788s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 57, 47, 524190), 'duration_minutes': 60}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.05573s ago] {'pk_1': 1}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.03185s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 27, 47, 524190), 'duration_minutes': 60}
2025-04-09 20:57:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:47 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:57:47 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: POST http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: POST http://testserver/reservations/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:57:47 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 20:57:47 - app.routers.reservations - INFO - Бронирование 1 успешно удалено
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 200 OK"
2025-04-09 20:57:47 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 999
2025-04-09 20:57:47 - app.routers.reservations - WARNING - Бронирование 999 не найдено
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:57:47 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 20:57:47 - app.routers.reservations - ERROR - Ошибка при удалении бронирования 1: Delete error
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 500 Internal Server Error"
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:47 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:57:47 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:57:47 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:57:47 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:57:47 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:57:47 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:57:47 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:57:47 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:57:47 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:57:47 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:57:47 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.001718s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:58:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.006695s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.007658s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] {}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.03233s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.0337s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.03792s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.03886s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.0258s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.02434s ago] {'pk_1': 1}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 58, 44, 47769), 'duration_minutes': 60}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.0617s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.06263s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] {}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.06683s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.06767s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [no key 0.00030s] {}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.05561s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.0535s ago] {'pk_1': 1}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.02845s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 58, 44, 75434), 'duration_minutes': 60}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.05735s ago] {'pk_1': 1}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.03236s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 28, 44, 75434), 'duration_minutes': 60}
2025-04-09 20:58:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:58:44 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:58:44 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: POST http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: POST http://testserver/reservations/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:58:44 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 20:58:44 - app.routers.reservations - INFO - Бронирование 1 успешно удалено
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 200 OK"
2025-04-09 20:58:44 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 999
2025-04-09 20:58:44 - app.routers.reservations - WARNING - Бронирование 999 не найдено
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:58:44 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 20:58:44 - app.routers.reservations - ERROR - Ошибка при удалении бронирования 1: Delete error
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 500 Internal Server Error"
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:58:44 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:58:44 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:58:44 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:58:44 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:58:44 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:58:44 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:58:44 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:58:44 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:58:44 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:58:44 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:58:44 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.001796s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.006779s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.007707s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.03149s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.03277s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.03721s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.03822s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.02562s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.02381s ago] {'pk_1': 1}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 59, 5, 684432), 'duration_minutes': 60}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'pk_1': 1}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.05993s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.06096s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.06487s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.06579s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [no key 0.00026s] {}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.05258s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.0502s ago] {'pk_1': 1}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.02574s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 20, 59, 5, 709501), 'duration_minutes': 60}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.05362s ago] {'pk_1': 1}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - [cached since 0.02933s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 29, 5, 709501), 'duration_minutes': 60}
2025-04-09 20:59:05 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:59:05 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 20:59:05 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: POST http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: POST http://testserver/reservations/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:59:05 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 20:59:05 - app.routers.reservations - INFO - Бронирование 1 успешно удалено
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 200 OK"
2025-04-09 20:59:05 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 999
2025-04-09 20:59:05 - app.routers.reservations - WARNING - Бронирование 999 не найдено
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:59:05 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 20:59:05 - app.routers.reservations - ERROR - Ошибка при удалении бронирования 1: Delete error
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 500 Internal Server Error"
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:59:05 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 20:59:05 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 20:59:05 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 20:59:05 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 20:59:05 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:59:05 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 20:59:05 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 20:59:05 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 20:59:05 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 20:59:05 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 20:59:05 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.002186s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.01142s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.01256s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'name': 'A1', 'seats': 4, 'location': 'Main Hall'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'pk_1': 1}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.03686s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.03815s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.04229s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.04315s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.02474s ago] {'name': 'B1', 'seats': 2, 'location': 'Patio'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.02257s ago] {'pk_1': 1}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'customer_name': 'John Doe', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 1, 1, 212062), 'duration_minutes': 60}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT reservation.id AS reservation_id, reservation.customer_name AS reservation_customer_name, reservation.table_id AS reservation_table_id, reservation.reservation_time AS reservation_reservation_time, reservation.duration_minutes AS reservation_duration_minutes 
FROM reservation 
WHERE reservation.id = %(pk_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'pk_1': 1}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.06411s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.06498s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE reservation
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
DROP TABLE "table"
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.06877s ago] {'table_name': 'table', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.06956s ago] {'table_name': 'reservation', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE "table" (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	seats INTEGER NOT NULL, 
	location VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)


2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reservation (
	id SERIAL NOT NULL, 
	customer_name VARCHAR NOT NULL, 
	table_id INTEGER NOT NULL, 
	reservation_time TIMESTAMP WITHOUT TIME ZONE, 
	duration_minutes INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT no_overlapping_reservations EXCLUDE USING gist (table_id WITH =, tsrange(reservation_time, reservation_time + duration_minutes * interval '1 minute') WITH &&), 
	FOREIGN KEY(table_id) REFERENCES "table" (id)
)


2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] {}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO "table" (name, seats, location) VALUES (%(name)s, %(seats)s, %(location)s) RETURNING "table".id
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.05075s ago] {'name': 'C1', 'seats': 2, 'location': 'VIP'}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.04853s ago] {'pk_1': 1}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.02537s ago] {'customer_name': 'Alice', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 1, 1, 236682), 'duration_minutes': 60}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - SELECT "table".id AS table_id, "table".name AS table_name, "table".seats AS table_seats, "table".location AS table_location 
FROM "table" 
WHERE "table".id = %(pk_1)s
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.05224s ago] {'pk_1': 1}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - INSERT INTO reservation (customer_name, table_id, reservation_time, duration_minutes) VALUES (%(customer_name)s, %(table_id)s, %(reservation_time)s, %(duration_minutes)s) RETURNING reservation.id
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - [cached since 0.02929s ago] {'customer_name': 'Bob', 'table_id': 1, 'reservation_time': datetime.datetime(2025, 4, 9, 21, 31, 1, 236682), 'duration_minutes': 60}
2025-04-09 21:01:01 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: GET http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 21:01:01 - app.routers.reservations - INFO - Запрос на получение списка бронирований
2025-04-09 21:01:01 - app.routers.reservations - INFO - Успешно получено 2 бронирований
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: GET http://testserver/reservations/ "HTTP/1.1 200 OK"
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: POST http://testserver/reservations "HTTP/1.1 307 Temporary Redirect"
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: POST http://testserver/reservations/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 21:01:01 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 21:01:01 - app.routers.reservations - INFO - Бронирование 1 успешно удалено
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 200 OK"
2025-04-09 21:01:01 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 999
2025-04-09 21:01:01 - app.routers.reservations - WARNING - Бронирование 999 не найдено
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/999 "HTTP/1.1 404 Not Found"
2025-04-09 21:01:01 - app.routers.reservations - INFO - Запрос на удаление бронирования ID 1
2025-04-09 21:01:01 - app.routers.reservations - ERROR - Ошибка при удалении бронирования 1: Delete error
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: DELETE http://testserver/reservations/1 "HTTP/1.1 500 Internal Server Error"
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: GET http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 21:01:01 - app.routers.tables - INFO - Запрос на получение списка столиков
2025-04-09 21:01:01 - app.routers.tables - INFO - Успешно получено 2 столиков
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: GET http://testserver/tables/ "HTTP/1.1 200 OK"
2025-04-09 21:01:01 - app.routers.tables - INFO - Запрос на создание столика: {'name': 'vip4', 'seats': 4, 'location': 'Холл'}
2025-04-09 21:01:01 - app.routers.tables - INFO - Столик создан: ID 3 - vip4
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 201 Created"
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: POST http://testserver/tables "HTTP/1.1 307 Temporary Redirect"
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: POST http://testserver/tables/ "HTTP/1.1 422 Unprocessable Entity"
2025-04-09 21:01:01 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 21:01:01 - app.routers.tables - INFO - Столик 1 успешно удален
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 200 OK"
2025-04-09 21:01:01 - app.routers.tables - INFO - Запрос на удаление столика ID 999
2025-04-09 21:01:01 - app.routers.tables - WARNING - Столик 999 не найден
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/999 "HTTP/1.1 404 Not Found"
2025-04-09 21:01:01 - app.routers.tables - INFO - Запрос на удаление столика ID 1
2025-04-09 21:01:01 - app.routers.tables - ERROR - Ошибка при удалении столика 1: Delete error
2025-04-09 21:01:01 - httpx - INFO - HTTP Request: DELETE http://testserver/tables/1 "HTTP/1.1 400 Bad Request"
